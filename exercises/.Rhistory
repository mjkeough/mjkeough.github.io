install.packages(c("bookdown", "cpp11", "effectsize", "htmltools", "igraph", "mirt", "progressr", "promises", "purrr", "RcppArmadillo", "recipes", "renv", "tinytex", "xfun"))
tonkin <- read.csv("~/Dropbox/QK 2nd ed/References/Example references with data/tonkin clean.csv")
View(tonkin)
library(rpart)
install.packages("rpart")
install.packages("rpart")
tonkin.rpart <- rpart(ept ~ region+trees_bl+trees_nl+shrub+herbaceous+cultivated+water+bio1+bio4+bio6+bio15+bio18+ai+pet+elevation+slope+catch_size, data=tonkin, method="anova")
tonkin.rpart <- rpart(ept ~ region+trees_bl+trees_nl+shrub+herbaceous+cultivated+water+bio1+bio4+bio8+bio15+bio18+ai+pet+elevation+slope+catch_size, data=tonkin, method="anova")
plot(predict(tonkin.rpart),residuals(tonkin.rpart))
summary(tonkin.rpart)
plot(tonkin.rpart)
text(tonkin.rpart, use.n=TRUE, all=TRUE)
install.packages("gbm")
library(gbm)
install.packages("dismo")
library(dismo)
tonkin.gbm <- gbm.step(gbm.y=3, gbm.x=c(2,7:22), data=tonkin, family="gaussian", bag.fraction=0.5, learning.rate=0.0005, tree.complexity=5)
tonkin.rpart <- rpart(ept ~ trees_bl+trees_nl+shrub+herbaceous+cultivated+water+bio1+bio4+bio8+bio15+bio18+ai+pet+elevation+slope+catch_size, data=tonkin, method="anova")
plot(tonkin.rpart)
text(tonkin.rpart, use.n=TRUE, all=TRUE)
tonkin.gbm <- gbm.step(gbm.y=3, gbm.x=c(7:22), data=tonkin, family="gaussian", bag.fraction=0.5, learning.rate=0.0005, tree.complexity=5)
gbm.plot(tonkin.gbm,varianle.no=0)
warnings()
gbm.plot(tonkin.gbm,variable.no=0)
boxplot(ept$tonkin~region$tonkin)
boxplot(tonkin$ept~tonkin$region)
```{r}
library(readxl)
install.packages("glmm.hp")
install.packages("kableExtra")
install.packages("lm.beta")
JEB088914TableS1 <- read_excel("../data/JEB088914TableS1.xls", skip = 1)
df<-dplyr::select(JEB088914TableS1, SPCode, Clade2, Diet1, N, MassG, VO2max, Wheel, MesquiteName)
(df <- df %>%
mutate(PRONG = case_when(
SPCode == 'AA' ~ 1,
SPCode != 'AA' ~ 0
)))
library(glmm.hp)
library(kableExtra)
library(lm.beta)
(df <- df %>%
mutate(PRONG = case_when(
SPCode == 'AA' ~ 1,
SPCode != 'AA' ~ 0
)))
library(dplyr)
(df <- df %>%
mutate(PRONG = case_when(
SPCode == 'AA' ~ 1,
SPCode != 'AA' ~ 0
)))
(df <- df %>%
mutate(HORSE = case_when(
SPCode == 'EC' ~ 1,
SPCode != 'EC' ~ 0
)))
(df <- df %>%
mutate(BAT = case_when(
SPCode == 'PH' ~ 1,
SPCode != 'PH' ~ 0
)))
df$lmass <- log10(df$MassG)
df$lVO2 <- log10(df$VO2max)
df$Clade2 <- as.character(df$Clade2)
df$Diet1 <- as.character(df$Diet1)
lm1 <-lm(data=df, lVO2 ~ lmass + Diet1 + Wheel + PRONG + BAT + HORSE)
summary(lm1)
library(lm.beta)
library(MuMIn)
options(na.action = "na.fail")
lm.dredge <- dredge(lm1, beta="none", evaluate=TRUE)
lm.dredge
lm.ma<-model.avg(lm.dredge)
summary(lm.ma)
sw(lm.dredge)
library(glmm.hp)
lm2.glm <-glm(data=df, lVO2 ~ lmass + Diet1 + Wheel + PRONG + BAT + HORSE, family = gaussian)
glmm.hp(lm2.glm, type="R2")
library(relaimpo)
lm.boot <- boot.relimp(lm1, b=1000, type = c("lmg", "pmvd"))
booteval.relimp(lm.boot)
install.packages("relaimpo")
gq <- df
lm2.glm <-glm(data=gq, lVO2 ~ lmass + Diet1 + Wheel + PRONG + BAT + HORSE, family = gaussian)
glmm.hp(lm2.glm, type="R2")
glmm.hp(lm2.glm, type="R2")
library(relaimpo)
lm.boot <- boot.relimp(lm1, b=1000, type = c("lmg", "pmvd"))
booteval.relimp(lm.boot)
library(relaimpo)
lm.boot <- boot.relimp(lm1, b=1000, type = c("lmg", "pmvd"))
lm.boot <- booteval.relimp(lm1, b=1000, type = c("lmg", "pmvd"))
.rs.restartR()
remove.packages("relaimpo")
library(relaimpo)
install.packages("relaimpo")
library(relaimpo)
lm2.glm <-glm(data=gq, lVO2 ~ lmass + Diet1 + Wheel + PRONG + BAT + HORSE, family = gaussian)
glmm.hp(lm2.glm, type="R2")
lm.boot <- boot.relimp(lm1, b=1000, type = c("lmg", "pmvd"))
lm1 <-lm(data=df, lVO2 ~ lmass + Diet1 + Wheel + PRONG + BAT + HORSE)
lm.boot <- boot.relimp(lm1, b=1000, type = c("lmg", "pmvd"))
lm.boot <- boot.relimp(lm1, b=1000, type = c("lmg"))
library(lm.beta)
library(MuMIn)
options(na.action = "na.fail")
lm.dredge <- dredge(lm1, beta="none", evaluate=TRUE)
lm.dredge
lm.boot <- calc.relimp(lm1, b=1000, type = c("lmg", "pmvd"))
lm.boot <- calc.relimp(lm1, x=NULL, b=1000, type = c("lmg", "pmvd"))
lm.boot <- calc.relimp(lm1, NULL, b=1000, type = c("lmg", "pmvd"))
lm.boot <- calc.relimp(lm1, NULL, b=1000, type = c("lmg"))
JEB088914TableS1 <- read_excel("../data/JEB088914TableS1.xls", skip = 1)
JEB088914TableS1
View(JEB088914TableS1)
View(df)
View(df)
library(readxl)
peraza <- read_excel("~/Dropbox/QK 2nd ed/R for Github/data/peraza clean.xlsx")
View(peraza)
library(car)
scatterplotMatrix(~thg+delta15n+delta13c+long+lat+prec+tempmax+tempmin+elev+soc+dist+sph10+sph60, data=peraza, cex=0.33, regLine=FALSE, diagonal=list(method='boxplot'))
boxplot(peraza$thg)
boxplot(ln(peraza$thg))
boxplot(log(peraza$thg))
lm(log(thg)~delta15n+delta13c+long+prec+tempmax+elev+soc+dist+sph10+hgdep+hgwet, data=peraza)
summary(lm)
perazo.lm <- lm(log(thg)~delta15n+delta13c+long+prec+tempmax+elev+soc+dist+sph10+hgdep+hgwet, data=peraza)
summary(perazo.lm)
plot(perazo.lm)
scatterplotMatrix(~thg+delta15n+delta13c+long+lat+prec+tempmax+tempmin+elev+soc+dist+sph10+sph60, data=peraza, cex=0.33, regLine=FALSE, diagonal=list(method='boxplot'))
influence(perazo.lm)
augment(perazo.lm)
cooks.distance(perazo.lm)
options(na.action = "na.fail")
perazo.dredge <- dredge(perazo.lm, beta="none", evaluate=TRUE)
perazo.dredge
perazo.ma<-model.avg(perazo.dredge)
summary(perazo.ma)
sw(perazo.dredge)
perazo.lm <- lm(log(thg)~delta15n+delta13c+long+prec+tempmax+elev+soc+dist+sph10+hgdep+hgwet, data=perazo)
peraza.lm <- lm(log(thg)~delta15n+delta13c+long+prec+tempmax+elev+soc+dist+sph10+hgdep+hgwet, data=peraza)
peraza.glm <-glm(data=peraza, log(thg)~delta15n+delta13c+long+prec+tempmax+elev+soc+dist+sph10+hgdep+hgwet, family = gaussian)
glmm.hp(peraza.glm, type="R2")
peraza.boot <- boot.relimp(lm1, b=1000, type = c("lmg", "pmvd"))
